<h1>individual ETA page</h1>
<h3><%= @location.location_name %></h3>
<h1><%= @time %></h1>
<h2 id='gmap-address'><%= @location.address %></h2>
<h2><%= @location.default_transport.capitalize %><h2>
<div class="show-gmap-canvas" id="gmaps-canvas" style="min-height: 250px;"></div>

<a href="/locations/<%= @location.id.to_s %>/edit">Edit</a>

<% if current_user.id == @location.user_id %>
   | <%= link_to "Delete", location_path(@location), method: :delete, data: { confirm: 'Are you certain you want to delete this?' } %>

<form action="/sendeta" method="post">
  <label>Enter number to text ETA to</label>
  <input type="text" name="send_to" placeholder="country code, area code, number, no spaces EX: 19177220237">
  <input type ="hidden" name="time" value="<%= @time %>">
  <input type ="hidden" name="destination" value="<%= @location.location_name %>">
  <%= hidden_field_tag :authenticity_token, form_authenticity_token %>
  <button type="submit">Send my ETA</button>
</form>
%>
 <% end %>
<script>
$(document).ready(function() {
  if( $('#gmaps-canvas').length  ) {
    gmaps_init();
    var addr = $("#gmap-address").text();
    // show location on map
    addr ? geocode_lookup( 'address', addr, true ) : console.log("false yo.");
    autocomplete_init();
    $('.modal-body').ready(function() {
      var currentCenter = map.getCenter();  // Get current center before resizing
      google.maps.event.trigger(map, "resize");
      map.setCenter(currentCenter); // Re-set previous center
    });
  };
});
  </script>